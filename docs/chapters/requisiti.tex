\chapter{Analisi e Specifica dei Requisiti}

\section{Analisi Nomi--Verbi}
Il progetto consiste nello sviluppo di un sistema integrato per la gestione di una farmacia, che incorpora funzionalità avanzate per ottimizzare sia le operazioni interne che le interazioni con i clienti.

\noindent Il sistema gestisce le vendite di farmaci online ed al tal fine possiede un \Class{catalogo} di tutti i farmaci che sono in vendita. Il catalogo dunque contiene un insieme di \Class{farmaci}, caratterizzati da \Attr{nome}, \Attr{codice identificativo} (stringa alfa-numerica di 20 caratteri), \Attr{prezzo} e \Attr{tipologia di farmaco}: farmaco da banco o farmaco da prescrizione. Il sistema deve permettere al farmacista di poter \Func{visualizzare il catalogo} e di aggiornarlo, potendo \Func{aggiungere, modificare o eliminare un prodotto}.

\noindent I \ClassActor{clienti} possono \Func{accedere al catalogo} online della farmacia solo previa registrazione, ed un database mantiene salvate le loro \Attr{informazioni personali}, incluso lo \Attr{storico dei farmaci da essi acquistati}, sia normalmente che tramite prescrizione.

\noindent Il sistema deve presentare un'interfaccia al cliente che permette di \Func{creare un} \Class{ordine} \Func{consultando il catalogo}, e di poter selezionare l'eventuale possesso della prescrizione per poter acquistare i farmaci non da banco. \Func{Nel caso in cui un utente provi ad acquistare un farmaco senza prescrizione il sistema deve generare un opportuno messaggio di errore}.

\noindent \Func{Ogni volta che un cliente effettua un ordine le quantità in magazzino del farmaco devono essere opportunamente decrementate} ed \Func{in caso di terminazione delle scorte, un} \Class{ordine di acquisto} \Func{deve essere creato con una quantità di prodotto da ordinare di default}. \`E compito del \Actor{farmacista} poter \Func{visualizzare l'elenco degli ordini d'acquisto in corso} e \Func{registrare l'avvenuta consegna di un ordine, con opportuno incremento delle quantità in magazzino}.

\noindent Infine, una caratteristica distintiva di questo sistema è il ruolo del ``\Actor{Direttore della Farmacia}'', che ha accesso a strumenti analitici e di reporting per una gestione strategica delle attività commerciali. Il direttore ha la capacità di \Func{generare report dettagliati}. Questi \Class{report} forniscono insight sui \Attr{farmaci venduti} e sull'\Attr{incasso generato in un dato periodo} (in una specifica data oppure in un intervallo compreso fra due date). In particolare, il sistema differenzia tra le vendite da banco, che contribuiscono all'incasso della farmacia, e le vendite di farmaci su prescrizione, che non generano incassi diretti. I report includeranno dati come \Attr{il numero totale di farmaci venduti}, \Attr{la categoria di vendita} (da banco o su prescrizione) e \Attr{l'incasso totale delle vendite da banco}.

\begin{table}[h]
	\centering
	\begin{tblr}{
		colspec = lllll,
		hlines = {1pt}, colsep = 12pt
		}
		\textcolor{ColorClass}{$\blacklozenge$} Classe &
		\textcolor{ColorAttr}{$\blacklozenge$} Attributo &
		\textcolor{ColorFunc}{$\blacklozenge$} Funzionalità &
		\textcolor{ColorActor}{$\blacklozenge$} Attore &
		\textcolor{ColorClassActor}{$\blacklozenge$} Classe--Attore \\
	\end{tblr}
\end{table}

\section{Revisione dei Requisiti}

\begin{enumerate}
	% \item Il sistema deve gestire un catalogo di tutti i farmaci che sono in vendita;
	\item I farmaci sono caratterizzati da nome, codice identificativo, prezzo e tipologia di farmaco;
	\item Un farmaco può essere da banco o da prescrizione;
	\item Il sistema deve permettere al farmacista di visualizzare il catalogo;
	\item Il sistema deve permettere al farmacista di aggiungere un prodotto;
	\item Il sistema deve permettere al farmacista di modificare un prodotto;
	\item Il sistema deve permettere al farmacista di eliminare un prodotto;
	\item Il sistema deve permettere al cliente di registrarsi;
	\item Di ogni cliente si vogliono memorizzare le informazioni personali e lo storico dei farmaci acquistati;
	\item Il sistema deve permettere al cliente di visualizzare il catalogo;
	\item Il sistema deve permettere al cliente di creare un ordine consultando il catalogo;
	\item Il sistema deve generare un messaggio di errore se il cliente prova ad acquistare un farmaco da prescrizione senza averla;
	\item Ogni volta che un cliente effettua un ordine, il sistema deve opportunamente aggiornare le scorte;
	\item Il sistema deve generare un ordine di acquisto in caso di esaurimento delle scorte di un prodotto;
	\item Il sistema deve permettere al farmacista di visualizzare l'elenco degli ordini d'acquisto in corso;
	\item Il sistema deve permettere al farmacista di registrare l'avvenuta consegna di un ordine d'acquisto, con opportuno incremento delle quantità in magazzino;
	\item Il sistema deve permettere al Direttore di generare report dettagliati;
	\item Il report fornisce informazioni sul numero totale di farmaci venduti, sulla loro categoria di vendita e sull'incasso totale in un dato periodo;
	\item Nella generazione dei report, soltanto le vendite da banco contribuiscono al calcolo dell'incasso totale;
\end{enumerate}

\subsection{Requisiti Aggiuntivi}

In seguito ad un ulteriore colloquio tenuto con il committente, si è ritenuto opportuno introdurre i seguenti requisiti:

\begin{enumerate}
	\setcounter{enumi}{18}
	\item Il sistema deve permettere al farmacista di visualizzare gli ordini dei clienti;
	\item Il sistema deve permettere al farmacista di gestire gli ordini dei clienti;
	\item Il sistema deve permettere al cliente di visualizzare i propri ordini;
	\item Il sistema deve generare una ricevuta per il cliente in seguito alla creazione di un ordine.
	\item Il sistema deve permettere al cliente di cercare un farmaco all'interno del catalogo.
	\item Il sistema deve permettere al farmacista di ordinare nuove forniture di un farmaco.
\end{enumerate}

\section{Glossario dei Termini}

\begin{tblr}{
	colspec = lXl,
	hlines, vlines,
	row{1} = {font=\bfseries}
}
	Termine & Descrizione & Sinonimi \\
	Farmaco & Un articolo in vendita nella farmacia & Prodotto \\
	Cliente & Cliente che ha effettuato la registrazione & Cliente registrato \\
	Ordine & Ordine generato dal cliente & \\
	Ordine d'acquisto & Ordine di scorte generato automaticamente dal sistema & \\
	Report & {Documento che fornisce al Direttore insights sui farmaci venduti \\ e sull'incasso generato in un dato periodo} & \\
\end{tblr}

\raggedbottom

\section{Classificazione dei Requisiti}

\subsection{Requisiti Funzionali}

\begin{tblr}{
	colspec = lXl,
	hlines, vlines,
	row{1} = {font=\bfseries}
	}
	ID & Requisito & Origine \\
	\Req{rf}{01} & Il sistema deve permettere al farmacista di visualizzare il catalogo & 3 \\
	\Req{rf}{02} & Il sistema deve permettere al farmacista di aggiungere un prodotto & 4 \\
	\Req{rf}{03} & Il sistema deve permettere al farmacista di modificare un prodotto & 5 \\
	\Req{rf}{04} & Il sistema deve permettere al farmacista di eliminare un prodotto & 6 \\
	\Req{rf}{05} & Il sistema deve permettere al cliente di registrarsi & 7 \\
	\Req{rf}{06} & Il sistema deve permettere al cliente di visualizzare il catalogo & 9 \\
	\Req{rf}{07} & Il sistema deve permettere al cliente di creare un ordine consultando il catalogo & 10 \\
	\Req{rf}{08} & {Il sistema deve generare un messaggio di errore se il cliente prova ad acquistare \\ un farmaco da prescrizione senza averla} & 11 \\
	\Req{rf}{09} & {Ogni volta che un cliente effettua un ordine, \\ il sistema deve opportunamente aggiornare le scorte} & 12 \\
	\Req{rf}{10} & {Il sistema deve generare un ordine di acquisto in caso di esaurimento \\ delle scorte di un prodotto} & 13 \\
	\Req{rf}{11} & {Il sistema deve permettere al farmacista di visualizzare \\ l'elenco degli ordini d'acquisto in corso} & 14 \\
	\Req{rf}{12} & {Il sistema deve permettere al farmacista di registrare l'avvenuta consegna \\ di un ordine d'acquisto, con opportuno incremento delle quantità in magazzino} & 15 \\
	\Req{rf}{13} & Il sistema deve permettere al Direttore di generare report dettagliati & 16 \\
	\Req{rf}{14} & Il sistema deve permettere al farmacista di visualizzare gli ordini dei clienti & 19 \\
	\Req{rf}{15} & Il sistema deve permettere al farmacista di gestire gli ordini dei clienti & 20 \\
	\Req{rf}{16} & Il sistema deve permettere al cliente di visualizzare i propri ordini & 21 \\
	\Req{rf}{17} & Il sistema deve generare una ricevuta per il cliente in seguito alla creazione di un ordine & 22 \\
	\Req{rf}{18} & Il sistema deve permettere al cliente di cercare un farmaco all'interno del catalogo & 23 \\
	\Req{rf}{19} & Il sistema deve permettere al farmacista di ordinare nuove forniture di un farmaco. & 24
\end{tblr}

\subsection{Requisiti sui Dati}

\begin{tblr}{
	colspec = lXl,
	hlines, vlines,
	row{1} = {font=\bfseries}
	}
	ID & Requisito & Origine \\
	\label{rd01}\Req{rd}{01} & {I farmaci sono caratterizzati da nome, codice identificativo, \\ prezzo e tipologia di farmaco} & 1 \\
	\label{rd02}\Req{rd}{02} & Un farmaco può essere da banco o da prescrizione & 2 \\
	\label{rd03}\Req{rd}{03} & {Di ogni cliente si vogliono memorizzare le informazioni personali e \\ lo storico dei farmaci acquistati} & 8 \\
	\label{rd04}\Req{rd}{04} & {Il report fornisce informazioni sul numero totale di farmaci venduti, \\ sulla loro categoria di vendita e sull'incasso totale in un dato periodo} & 17 \\
\end{tblr}

\subsection{Vincoli/Altri Requisiti}

\begin{tblr}{
	colspec = lXl,
	hlines, vlines,
	row{1} = {font=\bfseries}
	}
	ID & Requisito & Origine \\
	\Req{v}{01} & {Nella generazione dei report, soltanto le vendite da banco contribuiscono \\ al calcolo dell'incasso totale} & 18 \\
\end{tblr}