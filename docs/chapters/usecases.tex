\chapter{Modellazione dei Casi d'Uso}

\section{Attori e Casi d'Uso}

\begin{table}[!hbp]
	\centering
	\begin{tblr}{colspec=XX}
		\begin{minipage}[t]{\linewidth}
			\paragraph{Attori primari}
			\begin{itemize}
				\item UtenteRegistrato
				\item Cliente
				\item Farmacista
				\item Direttore
				\item Cliente non registrato
			\end{itemize}
		\end{minipage} &
		\begin{minipage}[t]{\linewidth}
			\paragraph{Attori secondari}
			\begin{itemize}
				\item Farmacista
			\end{itemize}
		\end{minipage} \\
	\end{tblr}
\end{table}

\begin{table}[!hbp]
	\centering
	\begin{tblr}{colspec=XX}
		\begin{minipage}[t]{\linewidth}
			\paragraph{Casi d'uso}
			\begin{enumerate}
				\item VisualizzaCatalogo % RF01, RF06
				\item AggiungiFarmaco % RF02
				\item CercaFarmaco % RF18
				\item ModificaFarmaco % RF03
				\item EliminaFarmaco % RF04
				\item RegistraCliente % RF05
				\item CreaOrdine % RF07, RF08, RF09, RF17
				\item GeneraOrdineAcquisto % RF10
				\item VisualizzaOrdiniAcquisto % RF11
				\item RegistraConsegnaOrdineAcquisto % RF12
				\item GeneraReport % RF13
				\item VisualizzaOrdiniFarmacia % RF14
				\item RitiraOrdine % RF15
				\item VisualizzaStoricoOrdini % RF16
				\item GeneraOrdineAcquistoFarmacista % RF19
			\end{enumerate}
		\end{minipage} &
		\begin{minipage}[t]{\linewidth}
			\paragraph{Casi d'uso di inclusione}
			\begin{enumerate}
				\item CercaFarmaco
				\item VisualizzaOrdiniFarmacia
				\item VisualizzaOrdiniAcquisto
			\end{enumerate}

			\paragraph{Casi d'uso di estensione}
			\begin{enumerate}
				\item GeneraOrdineAcquisto % RF10
			\end{enumerate}
		\end{minipage}
	\end{tblr}
\end{table}

\begin{table}[!hbp]
	\centering
	\begin{tblr}{
		colspec = lllll,
		hlines,
		row{1} = {font=\bfseries}
	}
		Caso d'uso & Attori primari & {Attori \\ secondari} & Incl. / Ext. & Requisito \\
		VisualizzaCatalogo & UtenteRegistrato & - & - & {\Req{rf}{01} \\ \Req{rf}{06}} \\
		AggiungiFarmaco & Farmacista & - & - & \Req{rf}{02} \\
		ModificaFarmaco & Farmacista & - & {Include \\ CercaFarmaco} & \Req{rf}{03} \\
		EliminaFarmaco & Farmacista & - & {Include \\ CercaFarmaco} & \Req{rf}{04} \\
		RegistraCliente & {Cliente \\ non registrato} & - & - & \Req{rf}{05} \\
		CreaOrdine & Cliente & - & {Include \\ CercaFarmaco} & {\Req{rf}{07} \\ \Req{rf}{08} \\ \Req{rf}{09} \\ \Req{rf}{17}} \\
		GeneraOrdineAcquisto & Cliente & - & Incluso in CreaOrdine & \Req{rf}{10} \\
		VisualizzaOrdiniAcquisto & Farmacista & - & - & \Req{rf}{11} \\
		RegistraConsegnaOrdineAcquisto & Farmacista & - & {Include \\ VisualizzaOrdiniAcquisto} & \Req{rf}{12} \\
		GeneraReport & Direttore & - & - & \Req{rf}{13} \\
		VisualizzaOrdiniFarmacia & Farmacista & - & - & \Req{rf}{14} \\
		RitiraOrdine & Cliente & Farmacista & {Include \\ VisualizzaOrdiniFarmacia} & \Req{rf}{15} \\
		VisualizzaStoricoOrdini & Cliente & - & - & \Req{rf}{16} \\
		CercaFarmaco & UtenteRegistrato & - & - & \Req{rf}{18} \\
		GeneraOrdineAcquistoFarmacista & Farmacista & - & - & \Req{rf}{19}
	\end{tblr}
\end{table}

\section{Diagramma dei Casi d'Uso}
% TODO: add image from vpp or create diagram with tikzuml package
\includegraphics[width=\linewidth]{assets/UseCaseFarmacia.png}

\section{Scenari}

\input{chapters/usecases/RegistraCliente}
\input{chapters/usecases/VisualizzaCatalogo}
\input{chapters/usecases/AggiungiFarmaco}
\input{chapters/usecases/CercaFarmaco}
\input{chapters/usecases/ModificaFarmaco}
\input{chapters/usecases/EliminaFarmaco}
\input{chapters/usecases/VisualizzaOrdiniAcquisto}
\input{chapters/usecases/RegistraConsegnaOrdineAcquisto}
\input{chapters/usecases/VisualizzaOrdiniFarmacia}
\input{chapters/usecases/RitiraOrdine}
\input{chapters/usecases/VisualizzaStoricoOrdini}
\input{chapters/usecases/CreaOrdine}
\input{chapters/usecases/GeneraOrdineAcquisto}
\input{chapters/usecases/GeneraOrdineAcquistoFarmacista}
\input{chapters/usecases/GeneraReport}

\pagebreak

\section{Diagramma delle Classi}
Di seguito riportiamo il diagramma delle classi di analisi.
\begin{figure}[!hbp]
	\centering
	\includegraphics[width=\linewidth]{assets/ClassDiagramAnalisi.png}
	\caption{Diagramma delle classi di analisi}
\end{figure}

\pagebreak

\section{Diagrammi di Sequenza}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiRegistraCliente.png}
	\caption{Diagramma di sequenza di analisi di RegistraCliente}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiVisualizzaCatalogo.png}
	\caption{Diagramma di sequenza di analisi di VisualizzaCatalogo}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiAggiungiFarmaco.png}
	\caption{Diagramma di sequenza di analisi di AggiungiFarmaco}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiCercaFarmaco.png}
	\caption{Diagramma di sequenza di analisi di CercaFarmaco}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiModificaFarmaco.png}
	\caption{Diagramma di sequenza di analisi di ModificaFarmaco}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiEliminaFarmaco.png}
	\caption{Diagramma di sequenza di analisi di EliminaFarmaco}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiVisualizzaOrdiniAcquisto.png}
	\caption{Diagramma di sequenza di analisi di VisualizzaOrdiniAcquisto}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=\linewidth]{assets/sequence_analisi/SequenceAnalisiAggiornaOrdineAcquisto.png}
	\caption{Diagramma di sequenza di analisi di AggiornaOrdineAcquisto (RegistraConsegnaOrdineAcquisto)}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiVisualizzaOrdiniFarmacia.png}
	\caption{Diagramma di sequenza di analisi di VisualizzaOrdiniFarmacia}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiRitiraOrdine.png}
	\caption{Diagramma di sequenza di analisi di RitiraOrdine}
\end{figure}

\pagebreak

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiVisualizzaStoricoOrdini.png}
	\caption{Diagramma di sequenza di analisi di VisualizzaStoricoOrdini}
\end{figure}

\pagebreak

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=\linewidth]{assets/sequence_analisi/SequenceAnalisiCreaOrdine.png}
	\caption{Diagramma di sequenza di analisi di CreaOrdine}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiGeneraOrdineAcquisto.png}
	\caption{Diagramma di sequenza di analisi di GeneraOrdineAcquisto}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=\linewidth]{assets/sequence_analisi/SequenceAnalisiGeneraOrdineAcquistoFarmacista.png}
	\caption{Diagramma di sequenza di analisi di GeneraOrdineAcquistoFarmacista}
\end{figure}

\begin{figure}[!hbp]
	\centering
	\includegraphics[width=0.8\linewidth]{assets/sequence_analisi/SequenceAnalisiGeneraReport.png}
	\caption{Diagramma di sequenza di analisi di GeneraReport}
\end{figure}

\pagebreak

\section{Verifica Completezza dei Requisiti}
\begin{itemize}
	\item \Req{rf}{01}, \Req{rf}{06} Modellati in UCD da VisualizzaCatalogo con l'attore UtenteRegistrato e con il caso d'uso UC1
	\item \Req{rf}{02} Modellato in UCD da AggiungiFarmaco con l'attore primario Farmacista
	\item \Req{rf}{03} Modellato in UCD da ModificaFarmaco con l'attore primario Farmacista
	\item \Req{rf}{04} Modellato in UCD da EliminaFarmaco con l'attore primario Farmacista
	\item \Req{rf}{05} Modellato in UCD da RegistraCliente con l'attore primario Cliente non Registrato
	\item \Req{rf}{07}, \Req{rf}{08}, \Req{rf}{09}, \Req{rf}{10}, \Req{rf}{17} Modellati in UCD da CreaOrdine con l'attore primario Cliente
	\item \Req{rf}{11} Modellato in UCD da VisualizzaOrdiniAcquisto con l'attore primario Farmacista
	\item \Req{rf}{12} Modellato in UCD da RegistraConsegnaOrdineAcquisto con l'attore primario Farmacista
	\item \Req{rf}{13} Modellato in UCD da GeneraReport con l'attore primario Direttore
	\item \Req{rf}{14} Modellato in UCD da VisualizzaOrdiniFarmacia con l'attore primario Farmacista
	\item \Req{rf}{15} Modellato in UCD da RitiraOrdine con l'attore primario Cliente e attore secondario Farmacista
	\item \Req{rf}{16} Modellato in UCD da VisualizzaStoricoOrdini con l'attore primario Cliente
	\item \Req{rf}{18} Modellato in UCD da CercaFarmaco con l'attore primario UtenteRegistrato
	\item \Req{rf}{19} Modellato in UCD da GeneraOrdineAcquistoFarmacista con l'attore primario Farmacista
	\item \Req{rd}{01}, \Req{rd}{02} Modellato nel CD dalla classe Farmaco
	\item \Req{rd}{03} Modellato nel CD dalla classe Cliente
	\item \Req{rd}{04} Modellato nel CD dalla classe Report
\end{itemize}

\begin{table}[!hbp]
	\centering
	\begin{tblr}{
		colspec = lllll,
		hlines = {1pt}, colsep = 12pt
		}
		UCD = Use Case Diagram &
		CD = Class Diagram &
		SD = Sequence Diagram \\
	\end{tblr}
\end{table}